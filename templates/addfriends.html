{% extends "layout.html" %}

{% block title %}
    Add friends
{% endblock %}

{% block main %}

        <p>
            Enter the username of the friend that you'd like to add.
        </p><br>

        <input autocomplete="off" autofocus class="form-control" placeholder="Username" type="text">
        <br>
        <form action="/addfriends" method="post">
            <ul> </ul>
        </form>
        <script crossorigin="anonymous" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script>
            // todo: make the names that come up a little more pretty/aligned - mess with the css classes
            // could explore: how to make the button change so it says 'friend request sent'
            let input = document.querySelector('input');
            input.addEventListener('keyup', function(){
                $.get('/search?q=' + input.value, function(users){
                    let html = '<br>';
                    for (let id in users)
                    {
                        let username = users[id].username;
                        let name = users[id]
                        html += '<input type = "text" class="form-control" name="username" value="'+username +'" readonly></input><button class = "btn btn-primary" type="submit">Add</button>' + '</div>';
                    }
                    document.querySelector('form').innerHTML = html;
                })
            })

        </script>

{% endblock %}